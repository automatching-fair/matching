<!DOCTYPE html>
<html>
<head>
  <title>표 확장하기</title>
  <link rel="stylesheet" href="style.css">
  <script src="script.js"></script>
</head>
<body>
  <table id="myTable" border="1">
    <tr>
      <td></td>
      <td>1</td>
      <td>2</td>
    </tr>
    <tr>
      <td>1</td>
      <td><input type="text"></td>
      <td><input type="text"></td>
    </tr>
  </table>
  <button onclick="addColumn()">오른쪽으로 확장</button>
  <button onclick="addRow()">아래로 확장</button>
  <button onclick="startMatching()">매칭 시작</button> <!-- 새로운 '매칭 시작' 버튼 -->
  <script>
    function startMatching() {
      var table = document.getElementById("myTable");
      var rowCount = table.rows.length;
      var columnCount = table.rows[0].cells.length;

      var firstRowValues = [];

      // 1번 행의 값을 읽어와 firstRowValues 배열에 저장
      for (var i = 1; i < columnCount; i++) {
        firstRowValues.push(table.rows[1].cells[i].querySelector('input').value);
      }

      // 1번 행에서 중복이 아닌 숫자 찾기
      var uniqueNumbers = [];
      for (var i = 0; i < firstRowValues.length; i++) {
        if (firstRowValues.indexOf(firstRowValues[i]) === firstRowValues.lastIndexOf(firstRowValues[i])) {
          uniqueNumbers.push(firstRowValues[i]);
        }
      }

      // 중복이 아닌 숫자가 없을 경우 가장 작은 수 찾기
      if (uniqueNumbers.length === 0) {
        var minNumber = Math.min.apply(null, firstRowValues.filter(Number));
        uniqueNumbers.push(minNumber);
      }

      // 중복이 아닌 숫자로 채우기
      for (var i = 2; i < rowCount; i++) {
        for (var j = 1; j < columnCount; j++) {
          var cell = table.rows[i].cells[j];
          var input = document.createElement('input');
          input.type = 'text';
          input.value = uniqueNumbers[0];
          cell.innerHTML = '';
          cell.appendChild(input);
        }
      }

      // 숫자 N을 찾아서 기준 셀로 설정
      var baseCell;
      for (var i = 1; i < rowCount; i++) {
        for (var j = 1; j < columnCount; j++) {
          if (table.rows[i].cells[j].querySelector('input').value === uniqueNumbers[0]) {
            baseCell = table.rows[i].cells[j];
            break;
          }
        }
        if (baseCell) {
          break;
        }
      }

      // 기준 셀을 제외하고 N과 같은 숫자를 가진 셀 삭제
      for (var i = 1; i < rowCount; i++) {
        for (var j = 1; j < columnCount; j++) {
          var cell = table.rows[i].cells[j];
          var input = cell.querySelector('input');
          if (cell !== baseCell && input.value === uniqueNumbers[0]) {
            input.value = '';
          }
        }
      }
    }
  </script>
</body>
</html>
